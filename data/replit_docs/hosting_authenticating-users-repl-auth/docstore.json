{"docstore/data": {"3d2ab229-cac5-4601-b4cc-3e93a69bf687": {"__data__": {"id_": "3d2ab229-cac5-4601-b4cc-3e93a69bf687", "embedding": null, "metadata": {"path": "/home/runner/replit-docs-qa-with-llamaindex/docs.replit.com/hosting/authenticating-users-repl-auth.html"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "89d72365-d57f-4948-80aa-553504712972", "node_type": "4", "metadata": {"path": "/home/runner/replit-docs-qa-with-llamaindex/docs.replit.com/hosting/authenticating-users-repl-auth.html"}, "hash": "58e7b80c0368251dd1621e4b8199031b8df88dfba9bff68ed533bdf03d8f26ac", "class_name": "RelatedNodeInfo"}}, "hash": "b50500039cb02a75b23e47f7098023eea877aa4f4a79611e8340ae58be2f3a87", "text": "</\n\ndiv\n\nThis script can be placed anywhere in the document body and will create an iframe within its parent element. Additionally, any JavaScript placed in the authed attribute will be executed when the user finishes authenticating. Currently, our app will just reload once the user authenticates.\n\nIf we run our application now, we'll see a Login with Replit button.\n\nIf you click the button, an authorization window will pop up with Let (your site url) know who you are?, a profile summary and an Authorize button. Clicking the button doesn't do anything at this stage; we'll add some functionality next.\n\nRetrieving Information from the Authenticated Account\u200b\n\nWe can retrieve the user's data by requesting information from the Replit specific headers and extracting data from them. The headers we want for this tutorial are X-Replit-User-Id, X-Replit-User-Name and X-Replit-User-Roles.\n\nLet's get these from the header and pass them to our HTML template.\n\nIn the main.py file change the home() function to look as follows:\n\n@app\n\nroute\n\n'/'\n\ndef\n\nhello_world\n\nreturn\n\nrender_template\n\n'index.html'\n\nuser_id\n\nrequest\n\nheaders\n\n'X-Replit-User-Id'\n\nuser_name\n\nrequest\n\nheaders\n\n'X-Replit-User-Name'\n\nuser_roles\n\nrequest\n\nheaders\n\n'X-Replit-User-Roles'\n\nAbove, we use request to get the Replit headers and place them into variables.\n\nNext we should update our index.html page to use the headers passed to it and display them back to the user if they are authenticated.\n\nOpen the index.html file and replace the body with the following:\n\nbody\n\n{% if user_id %}\n\nh1\n\nHello, {{ user_name }}!\n\n</\n\nh1\n\nYour user id is {{ user_id }}.\n\n</\n\n{% else %} Hello! Please log in.\n\ndiv\n\nscript\n\nauthed\n\nlocation.reload()\n\nsrc\n\nhttps://auth.util.repl.co/script.js\n\n</\n\nscript\n\n</\n\ndiv\n\n{% endif %}\n\n</\n\nbody\n\nAbove, we check if the user is already authenticated and display their account details. If not, they are asked to \"Please log in\".\n\nRun the application and you should see Hello, <username>! Your user id is <user_id>\n\nWarning\u200b\n\nBe aware that if you're going to use an accounts system, PLEASE do all the specific logic for checking users on the BACK END, do not do it with JavaScript in your HTML.\n\nClosing Notes\u200b\n\nIf you followed along, you'll have your own repl to expand. If not, you can fork our repl or test it out below.\n\n< Previous: Sharing Your Repl\n\nNext: Repl Auth 2.0 (beta) >\n\nWas this helpful?\n\nLast updated on Aug 31, 2023\n\nSetup\n\nCreating the Basic Flask App\n\nThe Authentication Script\n\nRetrieving Information from the Authenticated Account\n\nWarning\n\nClosing Notes", "start_char_idx": 0, "end_char_idx": 2572, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/ref_doc_info": {"89d72365-d57f-4948-80aa-553504712972": {"node_ids": ["3d2ab229-cac5-4601-b4cc-3e93a69bf687"], "metadata": {"path": "/home/runner/replit-docs-qa-with-llamaindex/docs.replit.com/hosting/authenticating-users-repl-auth.html"}}}, "docstore/metadata": {"3d2ab229-cac5-4601-b4cc-3e93a69bf687": {"doc_hash": "b50500039cb02a75b23e47f7098023eea877aa4f4a79611e8340ae58be2f3a87", "ref_doc_id": "89d72365-d57f-4948-80aa-553504712972"}}}